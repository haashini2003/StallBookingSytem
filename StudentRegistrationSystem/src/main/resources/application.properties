# ====================================
# APPLICATION CONFIGURATION
# ====================================

# Application
spring.application.name=StudentRegistrationSystem
server.servlet.context-path=/

# Server
server.port=8085
server.error.include-stacktrace=always
server.error.include-message=always
server.error.whitelabel.enabled=false

# ====================================
# DATABASE CONFIGURATION - H2 (In-memory)
# ====================================

# H2 Database
spring.datasource.url=jdbc:h2:mem:studentdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 Console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.trace=true
spring.h2.console.settings.web-allow-others=true

# ====================================
# JPA/HIBERNATE CONFIGURATION
# ====================================

# JPA
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true

# Hibernate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.show_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.generate_statistics=false

# ====================================
# THYMELEAF TEMPLATE ENGINE (IMPORTANT!)
# ====================================

# Thymeleaf Configuration
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.servlet.content-type=text/html

# Template Caching (set false for development)
spring.thymeleaf.cache=false
spring.thymeleaf.enabled=true

# Template Resolution
spring.thymeleaf.check-template-location=true
spring.thymeleaf.template-resolver-order=1
spring.thymeleaf.view-names=*
spring.thymeleaf.excluded-view-names=

# Reactor (for async)
spring.thymeleaf.reactive.max-chunk-size=8192
spring.thymeleaf.reactive.media-types=text/html

# ====================================
# LOGGING CONFIGURATION
# ====================================

# Logging Levels
logging.level.root=WARN
logging.level.org.springframework=INFO
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.boot.autoconfigure=DEBUG
logging.level.org.thymeleaf=DEBUG
logging.level.org.hibernate=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Application specific logging
logging.level.com.example=DEBUG
logging.level.com.example.StudentRegistrationSystem=DEBUG
logging.level.com.example.StudentRegistrationSystem.stalls=DEBUG

# Log File Configuration
logging.file.name=logs/student-registration.log
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ====================================
# SECURITY CONFIGURATION (Basic)
# ====================================

# Security (if using Spring Security)
spring.security.filter.order=10
spring.security.user.name=admin
spring.security.user.password=admin123
spring.security.user.roles=ADMIN

# CSRF (disable for development/testing)
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=

# ====================================
# FILE UPLOAD CONFIGURATION
# ====================================

spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.location=/tmp

# ====================================
# MVC CONFIGURATION
# ====================================

spring.mvc.format.date=yyyy-MM-dd
spring.mvc.format.date-time=yyyy-MM-dd HH:mm:ss
spring.mvc.format.time=HH:mm:ss
spring.mvc.throw-exception-if-no-handler-found=true
spring.mvc.static-path-pattern=/static/**

# ====================================
# STATIC RESOURCES
# ====================================

# Static resources location
spring.web.resources.static-locations=classpath:/static/,classpath:/public/,classpath:/resources/,classpath:/META-INF/resources/

# Cache static resources
spring.web.resources.cache.period=3600
spring.web.resources.cache.cachecontrol.max-age=3600
spring.web.resources.cache.cachecontrol.must-revalidate=true

# ====================================
# TESTING/DEVELOPMENT SETTINGS
# ====================================

# Development tools (disable in production)
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# Banner
spring.banner.location=classpath:banner.txt

# Auto-configuration
spring.autoconfigure.exclude=

# ====================================
# EMAIL CONFIGURATION (Optional)
# ====================================

# SMTP (if needed)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ====================================
# ERROR HANDLING
# ====================================

# Error pages
server.error.path=/error
server.error.include-exception=true
server.error.include-binding-errors=always

# ====================================
# DATASOURCE POOL CONFIGURATION
# ====================================

# Connection pool (HikariCP)
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ====================================
# CUSTOM APPLICATION PROPERTIES
# ====================================

# Stall Booking System Settings
app.stalls.booking.min-hours=1
app.stalls.booking.max-hours=6
app.stalls.booking.currency=RS
app.stalls.booking.tax-rate=0.18
app.stalls.booking.cancellation-hours=24

# File upload paths
app.upload.path=uploads/
app.upload.max-size=5MB
app.upload.allowed-types=jpg,png,pdf,doc,docx

# Email notifications
app.email.enabled=false
app.email.from=noreply@studentreg.com
app.email.confirmation-template=email/booking-confirmation.html